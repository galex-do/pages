---
layout: post
title:  "Централизованное логирование"
date:   2023-01-20 15:21:14 +0000
categories: howto
---

Представим, что вы - системный инженер в небольшой IT-компании. У компании 10 серверов; некоторые обслуживают бухгалтерию, некоторые используются для разработки и тестирования ПО. Вам нужно обеспечивать стабильную работу серверов, а в случае сбоев - быстро находить причину сбоя. В поиске причин вам помогут логи, а системы централизованного логирования позволят собрать логи со всех серверов в одно место и значительно сократят время поиска.

В этом занятии мы освежим то, что уже знаем о логах, а также разберемся, как их аггрегировать и анализировать. Если мы качественно настроим централизованное логирование, поиск нужных нам записей на 10 и на 100 серверах будет занимать одинаковое время.

---

### Что такое логи?

Почти все приложения, которые мы запускаем, пишут логи. Логи - это записи о событиях, возникающих во время работы программы.

#### Зачем они нужны?

Изучая логи, мы можем понять:


#### Где их искать?

---

### Сбор логов

#### Зачем собирать логи в одно место?

#### Как это делается?

Общая логика большинства решений по централизованному логированию сводится к следующему:

- На каждом сервере есть **приложение-агент**, которое сканирует новые строки в файлах логов (тех, которые мы укажем агенту в конфигурации)
- Агент отправляет собранные логи по сети на адрес аггрегатора.
-

#### Популярные решения

##### ELK

##### EFK

##### Loki + Grafana


#### Настроим сбор логов

---

### В итоге

Итак, на занятии мы вспомнили, что есть логи и где их искать; разобрались с концепцией централизованного логирования и с одним из решений (Grafana + Loki), позволяющим его реализовать; познакомились с языком запросов LogQL.  
